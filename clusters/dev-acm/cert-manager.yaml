applications:
  cert-manager-operator:
    annotations:
      argocd.argoproj.io/compare-options: IgnoreExtraneous
      argocd.argoproj.io/sync-wave: "5"
    destination:
      namespace: cert-manager
    source:
      path: components/cert-manager-operator
      plugin:
        name: argocd-lovely-plugin
        env:
          - name: LOVELY_KUSTOMIZE_PATCH
            value: |
              [{ "op": "replace", "path": "/helmCharts/0/valuesInline/operators/0/channel", "value": "stable-v1" }]

  cert-manager-config:
    annotations:
      argocd.argoproj.io/sync-wave: "15"
    destination:
      namespace: cert-manager
    source:
      path: components/cert-manager-config
      plugin:
        name: argocd-lovely-plugin
        env:
          - name: LOVELY_PREPROCESSORS
            value: sed -i 's/<REPLACE_DNS_ZONE>/v3socp.boo/g' *.yaml

  cert-manager-application:
    annotations:
      argocd.argoproj.io/sync-wave: "25"
    source:
      path: components/cert-manager-application
      plugin:
        name: argocd-lovely-plugin
        env:
          - name: LOVELY_PREPROCESSORS_YAML
            value: |-
              openshift-api:
              - "sed -i 's/<REPLACE_API_DNS_NAME>/api.dev-acm.v3socp.boo/g' *.yaml"
              openshift-wildcard:
              - "sed -i 's/<REPLACE_WILDCARD_DNS_NAME>/*.apps.dev-acm.v3socp.boo/g' *.yaml"
