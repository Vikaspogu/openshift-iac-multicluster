---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - ../../../bases/ztp-configuration/

patches:
  - target:
      kind: ExternalSecret
      name: pull-secret
    patch: |-
      - op: replace
        path: /metadata/namespace
        value: sno-1
      - op: replace
        path: /spec/target/name
        value: pull-secret-sno-1
  - target:
      kind: NMStateConfig
      name: nmstate
    patch: |-
      - op: replace
        path: /metadata/namespace
        value: sno-1
      - op: replace
        path: /metadata/name
        value: sno-1
      - op: replace
        path: /metadata/labels
        value:
          acm-ai-sno: sno-1
      - op: replace
        path: /spec/config/interfaces/0/ipv4/address/0/ip
        value: 10.30.30.103
      - op: replace
        path: /spec/config/interfaces/0/mac-address
        value: 52:50:56:11:22:44
      - op: replace
        path: /spec/interfaces/0/macAddress
        value: 52:50:56:11:22:44
  - target:
      kind: AgentClusterInstall
      name: agentcluster
    patch: |-
      - op: replace
        path: /metadata/namespace
        value: sno-1
      - op: replace
        path: /metadata/name
        value: sno-1
      - op: replace
        path: /spec/clusterDeploymentRef/name
        value: sno-1
  - target:
      kind: ClusterDeployment
      name: clusterdeploy
    patch: |-
      - op: replace
        path: /metadata/namespace
        value: sno-1
      - op: replace
        path: /metadata/name
        value: sno-1
      - op: replace
        path: /spec/baseDomain
        value: v3s.us
      - op: replace
        path: /spec/clusterName
        value: sno-1
      - op: replace
        path: /spec/clusterInstallRef/name
        value: sno-1
      - op: replace
        path: /spec/platform/agentBareMetal/agentSelector/matchLabels/cluster-name
        value: sno-1
      - op: replace
        path: /spec/pullSecretRef/name
        value: pull-secret-sno-1
  - target:
      kind: KlusterletAddonConfig
      name: klusterlet
    patch: |-
      - op: replace
        path: /metadata/namespace
        value: sno-1
      - op: replace
        path: /metadata/name
        value: sno-1
      - op: replace
        path: /spec/clusterName
        value: sno-1
      - op: replace
        path: /spec/clusterNamespace
        value: sno-1
      - op: replace
        path: /spec/clusterLabels/name
        value: sno-1
  - target:
      kind: ManagedCluster
      name: managedcluster
    patch: |-
      - op: replace
        path: /metadata/namespace
        value: sno-1
      - op: replace
        path: /metadata/name
        value: sno-1
      - op: replace
        path: /metadata/labels
        value:
          name: "sno-1"
          sno: "true"
  - target:
      kind: InfraEnv
      name: infraenv
    patch: |-
      - op: replace
        path: /metadata/namespace
        value: sno-1
      - op: replace
        path: /metadata/name
        value: sno-1
      - op: replace
        path: /spec/clusterRef/name
        value: sno-1
      - op: replace
        path: /spec/clusterRef/namespace
        value: sno-1
      - op: replace
        path: /spec/pullSecretRef/name
        value: pull-secret-sno-1
      - op: replace
        path: /spec/nmStateConfigLabelSelector/matchLabels/acm-ai-sno
        value: sno-1
  - target:
      kind: ExternalSecret
      name: bmc
    patch: |-
      - op: replace
        path: /metadata/namespace
        value: sno-1
      - op: replace
        path: /spec/target/name
        value: sno-1-master0
  - target:
      kind: BareMetalHost
      name: bmc
    patch: |-
      - op: replace
        path: /metadata/namespace
        value: sno-1
      - op: replace
        path: /metadata/name
        value: sno-1-master0
      - op: replace
        path: /metadata/labels
        value:
          infraenvs.agent-install.openshift.io: "sno-1"
      - op: replace
        path: /metadata/annotations
        value:
          bmac.agent-install.openshift.io/hostname: "master-0.sno-1.v3s.us"
          bmac.agent-install.openshift.io/role: "master"
      - op: replace
        path: /spec/bootMACAddress
        value: 52:50:56:11:22:44
      - op: replace
        path: /spec/bmc/address
        value: ipmi://10.30.30.40:6625
      - op: replace
        path: /spec/bmc/credentialsName
        value: sno-1-master0
