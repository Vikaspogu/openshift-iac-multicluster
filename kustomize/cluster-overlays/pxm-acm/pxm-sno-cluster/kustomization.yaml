---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - ../../../bases/managed-cluster/

patches:
  - target:
      kind: Namespace
    patch: |-
      - op: replace
        path: /metadata/name
        value: pxm-sno
  - target:
      kind: ExternalSecret
      name: pull-secret
    patch: |-
      - op: replace
        path: /metadata/namespace
        value: pxm-sno
      - op: replace
        path: /spec/target/name
        value: pull-secret-pxm-sno
  - target:
      kind: NMStateConfig
      name: nmstate
    patch: |-
      - op: replace
        path: /metadata/namespace
        value: pxm-sno
      - op: replace
        path: /metadata/name
        value: pxm-sno
      - op: replace
        path: /metadata/labels
        value:
          acm-ai: pxm-sno
      - op: replace
        path: /spec/config/interfaces/0/ipv4/address/0/ip
        value: 10.30.30.103
      - op: replace
        path: /spec/config/interfaces/0/mac-address
        value: 52:50:56:11:22:44
      - op: replace
        path: /spec/interfaces/0/macAddress
        value: 52:50:56:11:22:44
  - target:
      kind: AgentClusterInstall
      name: agentcluster
    patch: |-
      - op: replace
        path: /metadata/namespace
        value: pxm-sno
      - op: replace
        path: /metadata/name
        value: pxm-sno
      - op: replace
        path: /spec/clusterDeploymentRef/name
        value: pxm-sno
  - target:
      kind: ClusterDeployment
      name: clusterdeploy
    patch: |-
      - op: replace
        path: /metadata/namespace
        value: pxm-sno
      - op: replace
        path: /metadata/name
        value: pxm-sno
      - op: replace
        path: /spec/baseDomain
        value: v3s.us
      - op: replace
        path: /spec/clusterName
        value: pxm-sno
      - op: replace
        path: /spec/clusterInstallRef/name
        value: pxm-sno
      - op: replace
        path: /spec/platform/agentBareMetal/agentSelector/matchLabels/cluster-name
        value: pxm-sno
      - op: replace
        path: /spec/pullSecretRef/name
        value: pull-secret-pxm-sno
  - target:
      kind: KlusterletAddonConfig
      name: klusterlet
    patch: |-
      - op: replace
        path: /metadata/namespace
        value: pxm-sno
      - op: replace
        path: /metadata/name
        value: pxm-sno
      - op: replace
        path: /spec/clusterName
        value: pxm-sno
      - op: replace
        path: /spec/clusterNamespace
        value: pxm-sno
      - op: replace
        path: /spec/clusterLabels/name
        value: pxm-sno
  - target:
      kind: ManagedCluster
      name: managedcluster
    patch: |-
      - op: replace
        path: /metadata/namespace
        value: pxm-sno
      - op: replace
        path: /metadata/name
        value: pxm-sno
      - op: replace
        path: /metadata/labels
        value:
          name: "pxm-sno"
          pxm-sno: "true"
  - target:
      kind: InfraEnv
      name: infraenv
    patch: |-
      - op: replace
        path: /metadata/namespace
        value: pxm-sno
      - op: replace
        path: /metadata/name
        value: pxm-sno
      - op: replace
        path: /spec/clusterRef/name
        value: pxm-sno
      - op: replace
        path: /spec/clusterRef/namespace
        value: pxm-sno
      - op: replace
        path: /spec/pullSecretRef/name
        value: pull-secret-pxm-sno
      - op: replace
        path: /spec/nmStateConfigLabelSelector/matchLabels/acm-ai
        value: pxm-sno
