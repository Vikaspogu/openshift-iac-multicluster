---
apiVersion: config.openshift.io/v1
kind: OAuth
metadata:
  name: cluster
spec:
  identityProviders:
    - name: ldap-idp
      mappingMethod: claim
      type: LDAP
      ldap:
        attributes:
          id:
            - dn
          email:
            - mail
          name:
            - cn
          preferredUsername:
            - uid
        bindDN: uid=admin,ou=people,dc=home,dc=arpa
        bindPassword:
          name: oauth-secret
        insecure: true
        url: ldap://10.30.30.157/dc=home,dc=arpa
    - mappingMethod: claim
      name: authentik
      openID:
        extraScopes:
          - groups
        extraAuthorizeParameters:
          include_granted_scopes: "true"
        claims:
          email:
            - email
          name:
            - name
          preferredUsername:
            - preferred_username
        clientID: V9zsZk0StvJ2tPc9cipZ8rui7sejAqWS8PHCSgOQ
        clientSecret:
          name: oauth-secret
        issuer: "https://id.vikaspogu.com/application/o/openshift"
      type: OpenID
