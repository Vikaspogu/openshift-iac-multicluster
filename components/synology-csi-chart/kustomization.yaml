---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: synology-csi
resources:
  - ./namespace.yaml
  - ./externalsecret.yaml
  - ./synology-csi-scc.yaml

helmCharts:
  - name: synology-csi
    releaseName: synology-csi
    namespace: synology-csi
    repo: https://christian-schlichtherle.github.io/synology-csi-chart
    version: "0.9.10"
    valuesInline:
      clientInfoSecret:
        create: false
        name: synology-csi-secret
      installCSIDriver: true
      storageClasses:
        iscsi:
          parameters:
            fsType: "btrfs"
            location: "/volume1"
            formatOptions: "--nodiscard"
            protocol: iscsi
      volumeSnapshotClasses:
        synology-snapshotclass:
          deletionPolicy: Delete
